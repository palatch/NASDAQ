<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0D1117" />
  <title>Dime Logger ‚Äî Bitkub</title>
  <link rel="manifest" href="manifest.webmanifest?v=fullsite-v5-2025-08-10">
  <link rel="apple-touch-icon" href="icon-192.png" />
  <script>window.APP_VERSION="fullsite-v5-2025-08-10";</script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
  <style>
    :root{--bg:#0D1117;--panel:#0f131a;--line:#1f2632;--text:#E6EDF3;--muted:#9AA4B2;--green:#00C087;--red:#F05454;--amber:#ffb020}
    body{background:var(--bg);color:var(--text)}
    .card{background:#0f131a;border:1px solid var(--line);border-radius:16px}
    input,select,button{border-radius:12px}
    .btn{padding:.8rem 1rem;border-radius:12px}
    .btn-primary{background:var(--green);color:#062b21;font-weight:700}
    .pill{background:#0f1726;border:1px solid #223048;border-radius:999px;padding:.35rem .6rem}
    .muted{color:var(--muted)}
    .tag{font-size:11px;padding:.25rem .5rem;border-radius:999px}
    .t-red{background:#2a171a;color:#ffc9c9;border:1px solid #6a2b2f}
    .t-green{background:#10291f;color:#b9f6de;border:1px solid #1f6a50}
    .t-amber{background:#2a250f;color:#ffe7a3;border:1px solid #7a6820}
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <header class="p-4 sticky top-0 z-30" style="background:#0c121b;border-bottom:1px solid var(--line)">
    <div class="flex items-center justify-between">
      <div class="font-bold text-lg">Dime Logger ‚Äî Bitkub</div>
      <div class="text-xs muted">‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô: <span id="ver"></span></div>
    </div>
    <div class="text-[11px] muted mt-1">OCR ‡πÄ‡∏ï‡∏¥‡∏°‡∏ü‡∏≠‡∏£‡πå‡∏° ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏û‡∏≠‡∏£‡πå‡∏ï ¬∑ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏£‡∏¥‡∏á (Finnhub) ¬∑ ‡∏õ‡∏±‡∏ô‡∏ú‡∏• ¬∑ ‡∏û‡∏£‡∏µ‡∏ß‡∏¥‡∏ß/‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</div>
  </header>

  <main class="flex-1 p-4 space-y-4">
    <!-- Settings -->
    <section class="card p-4">
      <h2 class="font-semibold">‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</h2>
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-2 mt-2 text-sm">
        <input id="cfg-finnhub" placeholder="Finnhub API Key (‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)" />
        <input id="cfg-vision" placeholder="Vision Endpoint (https://.../ocr) ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏ß‡πâ" />
        <div class="flex gap-2">
          <button id="btnSaveCfg" class="btn" style="background:#1f2632">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
          <button id="btnTestKey" class="btn" style="background:#0e2b1f">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏µ‡∏¢‡πå</button>
          <button id="btnClearKey" class="btn" style="background:#2a171a;color:#f2b8b8">‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡∏µ‡∏¢‡πå</button>
        </div>
      </div>
      <div id="cfgMsg" class="text-xs mt-2 muted">‡∏Ñ‡∏µ‡∏¢‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏≠‡πá‡∏ô‡∏î‡πå‡∏û‡∏≠‡∏¢‡∏ï‡πå‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å</div>
    </section>

    <!-- OCR upload -->
    <section class="card p-4">
      <h2 class="font-semibold">üì∑ ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å Dime (OCR)</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 mt-3">
        <label class="btn btn-primary text-center">
          <input id="fileList" type="file" accept="image/*" capture="environment" class="hidden">
          üìÑ ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        </label>
        <label class="btn text-center" style="background:#09b076;color:#062b21;font-weight:700">
          <input id="fileDetail" type="file" accept="image/*" capture="environment" class="hidden">
          üßæ ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á
        </label>
      </div>
      <div id="ocrStatus" class="text-xs muted mt-2">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏±‡∏õ‡∏†‡∏≤‡∏û</div>
    </section>

    <!-- Form preview -->
    <section class="card p-4">
      <h2 class="font-semibold">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‚Äì‡∏Ç‡∏≤‡∏¢ (‡∏û‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏à‡∏≤‡∏Å OCR ‚Ä¢ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å)</h2>
      <div class="grid grid-cols-2 gap-2 mt-3 text-sm">
        <input id="qa-date"    placeholder="‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (YYYY-MM-DD HH:mm:ss)" />
        <select id="qa-side"><option>BUY</option><option>SELL</option><option>DIV</option><option>FEE</option></select>
        <input id="qa-symbol"  placeholder="‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå ‡πÄ‡∏ä‡πà‡∏ô TSLA" />
        <input id="qa-qty"     type="number" step="0.0000001" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∏‡πâ‡∏ô" />
        <input id="qa-price"   type="number" step="0.0000001" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏∏‡πâ‡∏ô (USD)" />
        <input id="qa-fee"     type="number" step="0.01" placeholder="‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°‡∏£‡∏ß‡∏° (USD)" />
        <input id="qa-note"    placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏" />
      </div>
      <div class="mt-3 flex gap-2">
        <button id="btnSave" class="px-3 py-2" style="background:#1f2632;border-radius:12px">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡∏û‡∏≠‡∏£‡πå‡∏ï</button>
        <button id="btnClear" class="px-3 py-2" style="background:#2a171a;color:#f2b8b8;border-radius:12px">‡∏•‡πâ‡∏≤‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°</button>
      </div>
      <div id="formErr" class="text-xs mt-2" style="color:#ffb4b4"></div>
    </section>

    <!-- Portfolio -->
    <section class="card p-4">
      <div class="flex items-center justify-between">
        <h2 class="font-semibold">‡∏û‡∏≠‡∏£‡πå‡∏ï‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô & ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h2>
        <div class="flex gap-2">
          <button id="btnEnableNotify" class="px-3 py-2" style="background:#1f2632;border-radius:12px">‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</button>
          <button id="btnRefresh" class="px-3 py-2" style="background:#1f2632;border-radius:12px">‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
        </div>
      </div>
      <div class="grid grid-cols-3 gap-2 text-sm mt-2">
        <div><label class="muted text-xs">TP %</label><input id="tp" type="number" step="0.1" value="5" class="w-full px-3 py-2"></div>
        <div><label class="muted text-xs">SL %</label><input id="sl" type="number" step="0.1" value="-10" class="w-full px-3 py-2"></div>
        <div><label class="muted text-xs">‡∏á‡∏ö‡πÉ‡∏Å‡∏•‡πâ‡∏≠‡∏≠‡∏Å (‡∏ß‡∏±‡∏ô)</label><input id="earnDays" type="number" step="1" value="3" class="w-full px-3 py-2"></div>
      </div>
      <div id="portfolio" class="mt-3 grid grid-cols-1 gap-3"></div>
    </section>

    <!-- Dividend summary -->
    <section class="card p-4">
      <h2 class="font-semibold">‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏• (USD)</h2>
      <div id="divSummary" class="text-sm mt-2"></div>
      <canvas id="divChart" class="mt-3"></canvas>
    </section>

    <!-- Raw OCR debug -->
    <section class="card p-4">
      <h2 class="font-semibold">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å OCR (‡∏î‡∏µ‡∏ö‡∏±‡∏Å)</h2>
      <pre id="raw" class="text-xs whitespace-pre-wrap mt-2"></pre>
    </section>
  </main>

  <footer class="p-4 text-center text-xs muted">PWA ¬∑ ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á ¬∑ Vision Endpoint ‡πÅ‡∏•‡∏∞ API Key (‡∏ñ‡πâ‡∏≤‡∏ï‡∏±‡πâ‡∏á) ‡∏à‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</footer>

  <script src="app.js?v=fullsite-v5-2025-08-10"></script>
  <script>if('serviceWorker' in navigator){addEventListener('load',()=>navigator.serviceWorker.register('./sw.js?v=fullsite-v5-2025-08-10'));}; document.getElementById('ver').textContent=window.APP_VERSION;</script>
</body>
</html>
