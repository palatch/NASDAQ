
<!DOCTYPE html>

<html lang="th">
<head>
<meta charset="utf-8"/>
<title>‡∏£‡∏∞‡∏ö‡∏ö‡∏°‡∏≠‡∏ô‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏´‡∏∏‡πâ‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<style>
body {
  font-family: 'Segoe UI', sans-serif;
  margin: 0;
  padding: 20px;
  background: linear-gradient(to bottom right, #f5f5f5, #dcdcdc);
  color: #333;
}

h2, h3 {
  color: #bfa14f;
  text-align: center;
}

input, button {
  padding: 12px;
  margin: 8px 0;
  width: 100%;
  max-width: 320px;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 16px;
  box-sizing: border-box;
}

input {
  background-color: #fff;
}

button {
  background: linear-gradient(to right, #d4af37, #c0c0c0);
  color: #fff;
  border: none;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.3s ease;
}

button:hover {
  background: linear-gradient(to right, #c0c0c0, #d4af37);
}

ul {
  list-style: none;
  padding: 0;
}

li {
  background-color: #fff;
  margin-bottom: 10px;
  padding: 12px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

@media (max-width: 600px) {
  body {
    padding: 10px;
  }

  input, button {
    font-size: 14px;
  }

  li {
    font-size: 14px;
  }
}

/* Fade-in animation */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
body, h2, h3, ul, li, input, button {
  animation: fadeIn 0.6s ease-in-out;
}

/* Hover effects for buttons */
button {
  transition: background 0.3s, transform 0.2s;
}
button:hover {
  background: linear-gradient(to right, #ffd700, #c0c0c0);
  transform: scale(1.05);
}

/* Icon spacing */
button i {
  margin-right: 8px;
}
</style><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/></head>
<body>
<h2><i class="fas fa-chart-line"></i> üìà ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏∏‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏ô‡πÉ‡∏à</h2>
<input id="symbolInput" placeholder="‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏´‡∏∏‡πâ‡∏ô ‡πÄ‡∏ä‡πà‡∏ô AAPL" type="text"/>
<input id="buyPriceInput" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ã‡∏∑‡πâ‡∏≠" type="number"/>
<input id="tpInput" placeholder="‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≥‡πÑ‡∏£ (TP)" type="number"/>
<input id="slInput" placeholder="‡∏à‡∏∏‡∏î‡∏ï‡∏±‡∏î‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô (SL)" type="number"/>
<input id="sharesInput" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∏‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠" type="number"/>
<button onclick="addStock()"><i class="fas fa-plus"></i>+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏∏‡πâ‡∏ô</button>
<h3><i class="fas fa-list"></i> ‚úÖ ‡∏´‡∏∏‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß:</h3>
<ul id="stockList"></ul>
<script>
    const API_KEY = 'd24u9h9r01qu2jgk36cgd24u9h9r01qu2jgk36d0';
    const API_ENDPOINT = 'https://finnhub.io/api/v1';

    function loadStocks() {
      const stocks = JSON.parse(localStorage.getItem('stocks') || '[]');
      const stockList = document.getElementById('stockList');
      stockList.innerHTML = '';
      stocks.forEach(stock => {
        const li = document.createElement('li');
        li.className = 'stock-item';
        li.innerHTML = `
          <strong>${stock.symbol}</strong><br>
          ‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏µ‡πà: ${stock.buyPrice} | TP: ${stock.tp} | SL: ${stock.sl} | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ${stock.shares}<br>
          <span id="result-${stock.symbol}">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</span><br>
          <button class="remove-btn" onclick="removeStock('${stock.symbol}')">‡∏•‡∏ö</button>
        `;
        stockList.appendChild(li);
        updateStockInfo(stock);
      });
    }

    function addStock() {
      const symbol = document.getElementById('symbolInput').value.trim().toUpperCase();
      const buyPrice = parseFloat(document.getElementById('buyPriceInput').value);
      const tp = parseFloat(document.getElementById('tpInput').value);
      const sl = parseFloat(document.getElementById('slInput').value);
      const shares = parseInt(document.getElementById('sharesInput').value);

      if (!symbol || isNaN(buyPrice) || isNaN(tp) || isNaN(sl) || isNaN(shares)) {
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á');
        return;
      }

      let stocks = JSON.parse(localStorage.getItem('stocks') || '[]');
      stocks.push({ symbol, buyPrice, tp, sl, shares });
      localStorage.setItem('stocks', JSON.stringify(stocks));

      document.getElementById('symbolInput').value = '';
      document.getElementById('buyPriceInput').value = '';
      document.getElementById('tpInput').value = '';
      document.getElementById('slInput').value = '';
      document.getElementById('sharesInput').value = '';

      loadStocks();
    }

    function removeStock(symbol) {
      let stocks = JSON.parse(localStorage.getItem('stocks') || '[]');
      stocks = stocks.filter(stock => stock.symbol !== symbol);
      localStorage.setItem('stocks', JSON.stringify(stocks));
      loadStocks();
    }

    function updateStockInfo(stock) {
      fetch(`${API_ENDPOINT}/quote?symbol=${stock.symbol}&token=${API_KEY}`)
        .then(response => response.json())
        .then(data => {
          const currentPrice = data.c;
          const feeRate = 0.0025;
          const totalBuy = stock.buyPrice * stock.shares;
          const totalCurrent = currentPrice * stock.shares;
          const fee = totalCurrent * feeRate;
          const profit = totalCurrent - totalBuy - fee;
          const resultText = `
            üìä ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ${currentPrice.toFixed(2)}<br>
            üí∞ ‡∏Å‡∏≥‡πÑ‡∏£/‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏Å‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏° (${(feeRate*100).toFixed(2)}%): ${profit.toFixed(2)} ‡∏ö‡∏≤‡∏ó
          `;
          document.getElementById(`result-${stock.symbol}`).innerHTML = resultText;

          if (currentPrice >= stock.tp) {
            alert(`üéØ ‡∏´‡∏∏‡πâ‡∏ô ${stock.symbol} ‡∏ñ‡∏∂‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≥‡πÑ‡∏£‡πÅ‡∏•‡πâ‡∏ß!`);
          } else if (currentPrice <= stock.sl) {
            alert(`‚ö†Ô∏è ‡∏´‡∏∏‡πâ‡∏ô ${stock.symbol} ‡∏ñ‡∏∂‡∏á‡∏à‡∏∏‡∏î‡∏ï‡∏±‡∏î‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô!`);
          }
        });

      fetch(`${API_ENDPOINT}/news-sentiment?symbol=${stock.symbol}&token=${API_KEY}`)
        .then(response => response.json())
        .then(data => {
          const sentiment = data.sentiment;
          if (!sentiment) return;
          const positive = sentiment.positiveScore;
          const negative = sentiment.negativeScore;
          if (positive > negative) {
            alert(`üìà ‡∏Ç‡πà‡∏≤‡∏ß‡∏Ç‡∏≠‡∏á ${stock.symbol} ‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏ß‡∏Å ‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏Ç‡∏∂‡πâ‡∏ô`);
          } else if (negative > positive) {
            alert(`üìâ ‡∏Ç‡πà‡∏≤‡∏ß‡∏Ç‡∏≠‡∏á ${stock.symbol} ‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏ö ‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏•‡∏á`);
          } else {
            alert(`‚öñÔ∏è ‡∏Ç‡πà‡∏≤‡∏ß‡∏Ç‡∏≠‡∏á ${stock.symbol} ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏•‡∏≤‡∏á`);
          }
        });

      fetch(`https://finnhub.io/api/v1/indicator?symbol=${stock.symbol}&resolution=D&indicator=rsi&token=${API_KEY}`)
        .then(res => res.json())
        .then(data => {
          const rsi = data?.rsi?.slice(-1)[0];
          if (rsi > 70) {
            alert(`üìâ RSI ‡∏Ç‡∏≠‡∏á ${stock.symbol} ‡∏™‡∏π‡∏á (${rsi.toFixed(2)}) ‡∏≠‡∏≤‡∏à‡∏ñ‡∏∂‡∏á‡∏à‡∏∏‡∏î‡∏Ç‡∏≤‡∏¢`);
          } else if (rsi < 30) {
            alert(`üìà RSI ‡∏Ç‡∏≠‡∏á ${stock.symbol} ‡∏ï‡πà‡∏≥ (${rsi.toFixed(2)}) ‡∏≠‡∏≤‡∏à‡∏ñ‡∏∂‡∏á‡∏à‡∏∏‡∏î‡∏ã‡∏∑‡πâ‡∏≠`);
          }
        });

      const chartUrl = `https://quickchart.io/chart?c={
        type:'line',
        data:{labels:['Mon','Tue','Wed','Thu','Fri'],
        datasets:[{label:'${stock.symbol}',data:[${stock.buyPrice},${stock.buyPrice+1},${stock.buyPrice+2},${stock.buyPrice+1.5},${stock.buyPrice+2.5}]}]}
      }`;
      const img = document.createElement('img');
      img.src = chartUrl;
      document.getElementById(`result-${stock.symbol}`).appendChild(img);
    }

    loadStocks();
    setInterval(loadStocks, 60 * 60 * 1000);
  </script>
</body>
</html>
