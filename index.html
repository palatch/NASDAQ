
<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ó‡∏£‡∏î TSLA/TSLS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      padding: 20px;
      background: #f4f7fa;
    }
    .container {
      max-width: 480px;
      margin: auto;
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.08);
    }
    input, select, button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      font-size: 1rem;
    }
    .result, .alert {
      margin-top: 15px;
      padding: 10px;
      border-radius: 8px;
    }
    .result { background: #e6f7ff; }
    .alert { background: #fff3cd; color: #856404; border: 1px solid #ffeeba; }
    table {
      width: 100%;
      margin-top: 15px;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 5px;
      font-size: 0.8rem;
      text-align: center;
    }
    th {
      background: #f0f0f0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ó‡∏£‡∏î TSLA / TSLS</h2>

    <label for="symbol">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏∏‡πâ‡∏ô:</label>
    <select id="symbol">
      <option value="TSLA">TSLA</option>
      <option value="TSLS">TSLS</option>
    </select>

    <label for="amount">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏∏‡∏ô‡∏•‡∏á‡∏ó‡∏∏‡∏ô (USD):</label>
    <select id="amount">
      <option value="50">50</option>
      <option value="100">100</option>
      <option value="500">500</option>
    </select>

    <div id="live-price">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>

    <button onclick="calculate()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∏‡πâ‡∏ô</button>

    <div id="output" class="result" style="display:none;"></div>
    <div id="alert" class="alert" style="display:none;"></div>

    <h3>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢</h3>
    <table id="history">
      <thead>
        <tr><th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th><th>‡∏´‡∏∏‡πâ‡∏ô</th><th>‡∏ó‡∏∏‡∏ô</th><th>‡∏£‡∏≤‡∏Ñ‡∏≤</th><th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∏‡πâ‡∏ô</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    const apiKey = "d24u9h9r01qu2jgk36cgd24u9h9r01qu2jgk36d0";
    let currentPrice = 0;

    async function fetchPrice(symbol) {
      try {
        const res = await fetch(`https://api.twelvedata.com/price?symbol=${symbol}&apikey=${apiKey}`);
        const data = await res.json();
        if (data.price) {
          currentPrice = parseFloat(data.price);
          document.getElementById("live-price").innerHTML = `‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: $${currentPrice.toFixed(2)}`;
        } else {
          document.getElementById("live-price").innerHTML = "‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à";
        }
      } catch (err) {
        document.getElementById("live-price").innerHTML = "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤";
      }
    }

    function calculate() {
      const investment = parseFloat(document.getElementById("amount").value);
      const symbol = document.getElementById("symbol").value;
      if (!investment || !currentPrice) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
        return;
      }

      const shares = (investment / currentPrice).toFixed(4);
      const sellPriceTarget = ((investment + 5) / shares).toFixed(2);

      document.getElementById("output").style.display = "block";
      document.getElementById("output").innerHTML = `‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏´‡∏∏‡πâ‡∏ô <b>${shares}</b> ‡∏´‡∏ô‡πà‡∏ß‡∏¢ ‡∏Ç‡∏≠‡∏á <b>${symbol}</b><br>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ã‡∏∑‡πâ‡∏≠: $${currentPrice.toFixed(2)}<br>‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≥‡πÑ‡∏£ 5 USD ‡∏Ñ‡∏ß‡∏£‡∏Ç‡∏≤‡∏¢‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡∏ñ‡∏∂‡∏á: <b>$${sellPriceTarget}</b>`;

      if (currentPrice >= sellPriceTarget) {
        document.getElementById("alert").style.display = "block";
        document.getElementById("alert").innerHTML = `üì¢ ‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≤‡∏¢ ${symbol} ‡πÅ‡∏•‡πâ‡∏ß! ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô $${currentPrice.toFixed(2)} ‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏Å‡∏≥‡πÑ‡∏£‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß`;
      } else {
        document.getElementById("alert").style.display = "none";
      }

      const now = new Date();
      const log = {
        date: now.toLocaleDateString(),
        symbol,
        investment,
        price: currentPrice.toFixed(2),
        shares
      };

      saveTrade(log);
      renderHistory();
    }

    function saveTrade(data) {
      let trades = JSON.parse(localStorage.getItem("trades") || "[]");
      trades.push(data);
      localStorage.setItem("trades", JSON.stringify(trades));
    }

    function renderHistory() {
      let trades = JSON.parse(localStorage.getItem("trades") || "[]");
      const tbody = document.querySelector("#history tbody");
      tbody.innerHTML = "";
      trades.forEach(t => {
        const row = `<tr><td>${t.date}</td><td>${t.symbol}</td><td>$${t.investment}</td><td>$${t.price}</td><td>${t.shares}</td></tr>`;
        tbody.innerHTML += row;
      });
    }

    document.getElementById("symbol").addEventListener("change", () => {
      fetchPrice(document.getElementById("symbol").value);
      document.getElementById("output").style.display = "none";
      document.getElementById("alert").style.display = "none";
    });

    fetchPrice("TSLA");
    renderHistory();
  </script>
</body>
</html>
