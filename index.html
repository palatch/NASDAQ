<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#0D1117">
  <title>Dime Logger ‚Äì Bitkub (OCR First)</title>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="apple-touch-icon" href="icon-192.png">
  <script>
    window.FINNHUB_API_KEY = "d24u9h9r01qu2jgk36cgd24u9h9r01qu2jgk36d0";
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
  <style>
    :root {
      --bg: #0D1117; --panel:#0f131a; --line:#1f2632; --text:#E6EDF3; --muted:#9AA4B2;
      --green:#00C087; --red:#F05454;
    }
    body { background:var(--bg); color:var(--text); }
    .card { background:#0f131a; border:1px solid var(--line); border-radius:16px; }
    input, select { background:#0e1420; color:var(--text); border:1px solid var(--line); border-radius:12px; }
    .btn { border-radius:12px; }
    .btn-primary { background:var(--green); color:#062b21; font-weight:700; }
    .pill { background:#0f1726; border:1px solid #223048; border-radius:999px; padding:.35rem .6rem; }
    .header { background:#0c121b; border-bottom:1px solid var(--line); }
    .muted { color:var(--muted); }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <header class="header p-4 sticky top-0 z-30">
    <div class="flex items-center justify-between">
      <div class="font-bold text-lg">Dime Logger ‚Äî Bitkub</div>
      <div class="text-xs muted" id="lastSync">‚Äî</div>
    </div>
    <div class="text-xs muted mt-1">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å Dime ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‚Äì‡∏Ç‡∏≤‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</div>
  </header>

  <main class="flex-1 p-4 space-y-4">

    <!-- OCR FIRST -->
    <section class="card p-4">
      <div class="flex items-center justify-between">
        <h2 class="font-semibold">‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏†‡∏≤‡∏û (OCR)</h2>
        <span class="text-xs pill">‡πÑ‡∏ó‡∏¢+‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©</span>
      </div>
      <div class="mt-3">
        <label for="ocrFile" class="btn btn-primary px-4 py-3 text-center block">üì∑ ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏û‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≤‡∏Å Dime</label>
        <input id="ocrFile" type="file" accept="image/*" class="hidden">
        <div id="ocrStatus" class="text-xs muted mt-2"></div>
      </div>
    </section>

    <!-- Quick add trade -->
    <section class="card p-4">
      <div class="flex items-center justify-between">
        <h2 class="font-semibold">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‚Äì‡∏Ç‡∏≤‡∏¢ (Quick Add)</h2>
        <span class="text-xs pill muted">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</span>
      </div>
      <div class="grid grid-cols-2 gap-2 mt-3">
        <input id="tradeDate" type="date" title="‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà">
        <input id="tradeSymbol" placeholder="‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå ‡πÄ‡∏ä‡πà‡∏ô TSLA" title="‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå">
        <select id="tradeSide" title="‡∏ù‡∏±‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á">
          <option value="BUY">BUY</option>
          <option value="SELL">SELL</option>
          <option value="DIV">DIV</option>
          <option value="FEE">FEE</option>
          <option value="TAX">TAX</option>
        </select>
        <input id="tradeQty" type="number" step="0.000001" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (‡∏´‡∏∏‡πâ‡∏ô/‡∏´‡∏ô‡πà‡∏ß‡∏¢)" title="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô">
        <input id="tradePrice" type="number" step="0.0001" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏∏‡πâ‡∏ô (USD)" title="‡∏£‡∏≤‡∏Ñ‡∏≤">
        <input id="tradeFee" type="number" step="0.01" placeholder="‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏° (USD)" title="‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°">
        <input id="tradeFx" type="number" step="0.0001" placeholder="FX USD‚ÜíTHB (‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å)" title="FX">
        <input id="tradeNote" placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)" title="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏">
      </div>
      <div class="mt-3 flex gap-2 flex-wrap">
        <button id="btnAddTrade" class="btn btn-primary px-4 py-2">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
        <button id="btnExportCsv" class="btn px-3 py-2 bg-[#1f2632] hover:opacity-90">Export CSV</button>
        <button id="btnClearAll" class="btn px-3 py-2" style="background:#2a171a; color:#f2b8b8;">‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
      </div>
    </section>

    <!-- Portfolio summary + sorting -->
    <section class="card p-4">
      <div class="flex items-center justify-between">
        <h2 class="font-semibold">‡∏™‡∏£‡∏∏‡∏õ‡∏û‡∏≠‡∏£‡πå‡∏ï & P/L</h2>
        <div class="text-xs muted">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô ¬∑ ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡∏∏‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ¬∑ ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏ñ‡∏∑‡∏≠‡∏Ñ‡∏£‡∏≠‡∏á</div>
      </div>
      <div id="portfolio" class="mt-3 grid grid-cols-1 gap-3"></div>
    </section>
  </main>

  <footer class="p-4 text-center text-xs muted">
    PWA ‚Äì ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô ¬∑ ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á ¬∑ ‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡∏Å
  </footer>

  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) { window.addEventListener('load', () => navigator.serviceWorker.register('./sw.js')); }
  </script>
</body>
</html>
