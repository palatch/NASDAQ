
<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏´‡∏∏‡πâ‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏¥‡∏ß‡∏¢‡∏≠‡∏£‡πå‡∏Å</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Tahoma', sans-serif;
      background: linear-gradient(to bottom right, #0f2027, #203a43, #2c5364);
      color: #e0e0e0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #00ffcc;
      font-size: 1.8em;
      margin-bottom: 20px;
      text-shadow: 0 0 5px #00ffff;
    }
    .box {
      padding: 15px;
      margin-top: 15px;
      border-radius: 10px;
      background: rgba(0, 0, 0, 0.4);
      box-shadow: 0 0 10px #000;
      border: 1px solid #555;
    }
    .buy { background: rgba(255, 0, 0, 0.2); color: #ff6666; }
    .sell { background: rgba(0, 255, 255, 0.2); color: #00e6e6; }
    .wait { background: rgba(255, 255, 0, 0.2); color: #ffcc00; }
    .status { font-weight: bold; font-size: 1.1em; margin-top: 10px; }
    .price { font-size: 1.2em; margin: 10px 0; }
    .graph-line {
      width: 100%;
      height: 1px;
      background: linear-gradient(to right, #00ffcc, transparent);
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <h1>üìà ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏´‡∏∏‡πâ‡∏ô TSLA ‡πÅ‡∏•‡∏∞ TSLS (‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏¥‡∏ß‡∏¢‡∏≠‡∏£‡πå‡∏Å)</h1>
  <div id="marketStatus" class="box status">‚è≥ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ï‡∏•‡∏≤‡∏î...</div>
  <div class="graph-line"></div>

  <div id="tslaBox" class="box">
    <h2>üìå TSLA</h2>
    <div id="tslaPrice" class="price">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤...</div>
    <div id="tslaSignal"></div>
    <div id="tslaBudget"></div>
  </div>

  <div class="graph-line"></div>

  <div id="tslsBox" class="box">
    <h2>üìå TSLS</h2>
    <div id="tslsPrice" class="price">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤...</div>
    <div id="tslsSignal"></div>
    <div id="tslsBudget"></div>
  </div>

  <script>
    const apiKey = "d24u9h9r01qu2jgk36cgd24u9h9r01qu2jgk36d0";
    const baseUrl = "https://finnhub.io/api/v1/quote?symbol=";

    function isMarketOpenNY() {
      const now = new Date();
      const utc = now.getTime() + now.getTimezoneOffset() * 60000;
      const nyOffset = -4; // EDT = UTC-4
      const nyDate = new Date(utc + 3600000 * nyOffset);

      const day = nyDate.getUTCDay();
      const hours = nyDate.getUTCHours();
      const minutes = nyDate.getUTCMinutes();

      const timeValue = hours * 60 + minutes;
      const openValue = 13 * 60 + 30; // 09:30 EDT
      const closeValue = 20 * 60;     // 16:00 EDT

      const statusBox = document.getElementById("marketStatus");
      if (day === 0 || day === 6 || timeValue < openValue || timeValue > closeValue) {
        statusBox.innerHTML = "‚ùå ‡∏ï‡∏•‡∏≤‡∏î‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ (‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏¥‡∏ß‡∏¢‡∏≠‡∏£‡πå‡∏Å)";
        statusBox.style.backgroundColor = "#550000";
      } else {
        statusBox.innerHTML = "‚úÖ ‡∏ï‡∏•‡∏≤‡∏î‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ (‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏¥‡∏ß‡∏¢‡∏≠‡∏£‡πå‡∏Å)";
        statusBox.style.backgroundColor = "#004d40";
      }
    }

    function fetchData(symbol, priceId, signalId, budgetId, buy, sell, gainPerUnit) {
      fetch(`${baseUrl}${symbol}&token=${apiKey}`)
        .then(response => response.json())
        .then(data => {
          const price = parseFloat(data.c);
          document.getElementById(priceId).innerHTML = `üíµ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <strong>$${price.toFixed(2)}</strong>`;

          let signal = "";
          if (price <= buy) {
            signal = `üî¥ ${symbol} ‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ $${buy} ‚Üí <strong>‡∏Ñ‡∏ß‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏±‡∏ô‡∏ó‡∏µ!</strong>`;
            document.getElementById(signalId).className = "buy";
            alert(`üì¢ ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô: ${symbol} ‡∏ñ‡∏∂‡∏á‡∏à‡∏∏‡∏î‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏•‡πâ‡∏ß!`);
          } else if (price >= sell) {
            signal = `üîµ ${symbol} ‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤ $${sell} ‚Üí <strong>‡∏Ñ‡∏ß‡∏£‡∏Ç‡∏≤‡∏¢‡∏ó‡∏±‡∏ô‡∏ó‡∏µ!</strong>`;
            document.getElementById(signalId).className = "sell";
            alert(`üì¢ ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô: ${symbol} ‡∏ñ‡∏∂‡∏á‡∏à‡∏∏‡∏î‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß!`);
          } else {
            signal = `‚è≥ ${symbol} ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á $${buy} ‚Äì $${sell} ‚Üí <strong>‡∏£‡∏≠‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞</strong>`;
            document.getElementById(signalId).className = "wait";
          }

          const units = Math.ceil(5 / gainPerUnit);
          const requiredBudget = (price * units).toFixed(2);
          document.getElementById(signalId).innerHTML = signal;
          document.getElementById(budgetId).innerHTML = `üí∞ ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ ‚âà <strong>$${requiredBudget}</strong> (${units} ‡∏´‡∏ô‡πà‡∏ß‡∏¢ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≥‡πÑ‡∏£ ‚â• $5)`;
        })
        .catch(err => {
          document.getElementById(priceId).innerHTML = "‚ùå ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à";
        });
    }

    isMarketOpenNY();
    fetchData("TSLA", "tslaPrice", "tslaSignal", "tslaBudget", 310, 330, 20);
    fetchData("TSLS", "tslsPrice", "tslsSignal", "tslsBudget", 7.00, 9.50, 2.5);
  </script>
</body>
</html>
